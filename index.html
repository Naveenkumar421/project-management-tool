<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project Management Tool</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background: #5694eb;
    }

    h1 {
      text-align: center;
    }

    h1 span{
      color: rgb(161, 13, 13);
    }

    #projectForm input {
      padding: 0.5rem;
      margin-right: 0.5rem;
    }

    #projectForm button{
      background-color: red;
      color: white;
      border: 2px solid grey;
      border-radius: 5px;
      height: 37px;
    }

    .project {
      background: #f3e869;
      margin: 1rem 0;
      padding: 1rem;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .task-list {
      list-style: none;
      padding: 0;
    }

    .task {
      display: flex;
      justify-content: space-between;
      margin-top: 0.5rem;
      background-color: rgb(251, 189, 81);
      padding: 10px;
      border-radius: 10px;
    }

    .task.completed span {
      text-decoration: line-through;
      color: gray;
    }

    .delete-btn {
      background: crimson;
      color: white;
      border: none;
      padding: 0.2rem 0.5rem;
      cursor: pointer;
      border-radius: 3px;
    }

    .add-task-input {
      margin-top: 0.5rem;
    }

    .add-task-btn{
      background-color: rgb(25, 206, 25);
      margin: 10px;
      border: 1px solid black;
      border-radius: 2px;
      height: 20px;
    }

  </style>
</head>
<body>

  <h1>Project <span>Management</span> Tool</h1>

  <form id="projectForm">
    <input type="text" id="projectName" placeholder="New Project Name" required>
    <button type="submit">Add Project</button>
  </form>

  <div id="projectsContainer"></div>

  <!-- <script>
    const projectForm = document.getElementById("projectForm");
    const projectNameInput = document.getElementById("projectName");
    const projectsContainer = document.getElementById("projectsContainer");

    let projects = JSON.parse(localStorage.getItem("projects")) || [];

    function saveProjects() {
      localStorage.setItem("projects", JSON.stringify(projects));
    }

    function renderProjects() {
      projectsContainer.innerHTML = "";

      projects.forEach((project, index) => {
        const projectEl = document.createElement("div");
        projectEl.className = "project";

        const title = document.createElement("h2");
        title.style.display = "flex";
        title.style.justifyContent = "space-between";
        title.style.alignItems = "center";

        const titleText = document.createElement("span");
        titleText.textContent = project.name;
        const dateText = document.createElement("div");
        dateText.style.fontSize = "0.9rem";
        dateText.style.color = "#333";
        dateText.textContent = `Created: ${project.createdAt || "Unknown"}`;


        const deleteProjectBtn = document.createElement("button");
        deleteProjectBtn.textContent = "X";
        deleteProjectBtn.className = "delete-btn";
        deleteProjectBtn.style.marginLeft = "1rem";
        deleteProjectBtn.onclick = () => {
          projects.splice(index, 1);
          saveProjects();
          renderProjects();
};

        title.appendChild(titleText);
        title.appendChild(deleteProjectBtn);
        projectEl.appendChild(title);
        projectEl.appendChild(dateText);



        // Add Task Form
        const taskInput = document.createElement("input");
        taskInput.placeholder = "New Task";
        taskInput.className = "add-task-input";

        const addTaskBtn = document.createElement("button");
        addTaskBtn.textContent = "Add Task";
        addTaskBtn.className="add-task-btn";
        addTaskBtn.onclick = () => {
          if (taskInput.value.trim() !== "") {
              project.tasks.push({
                text: taskInput.value.trim(),completed: false,
                createdAt: new Date().toLocaleString()
              });
              saveProjects();
              renderProjects();
}

        };

        projectEl.appendChild(taskInput);
        projectEl.appendChild(addTaskBtn);

        // Task List
        const taskList = document.createElement("ul");
        taskList.className = "task-list";

        project.tasks.forEach((task, tIndex) => {
          const taskItem = document.createElement("li");
          taskItem.className = "task";
          if (task.completed) taskItem.classList.add("completed");

          const taskContent = document.createElement("div");
          taskContent.style.display = "flex";
          taskContent.style.flexDirection = "column";

          const taskSpan = document.createElement("span");
          taskSpan.textContent = task.text;
          taskSpan.style.cursor = "pointer";
          taskSpan.onclick = () => {
              task.completed = !task.completed;
              saveProjects();
              renderProjects();
};

          const taskDate = document.createElement("small");
          taskDate.style.fontSize = "0.8rem";
          taskDate.style.color = "#444";
          taskDate.textContent = `Created: ${task.createdAt || "Unknown"}`;

          taskContent.appendChild(taskSpan);
          taskContent.appendChild(taskDate);


          const deleteBtn = document.createElement("button");
          deleteBtn.textContent = "X";
          deleteBtn.className = "delete-btn";
          deleteBtn.onclick = () => {
            project.tasks.splice(tIndex, 1);
            saveProjects();
            renderProjects();
          };

          taskItem.appendChild(taskContent);
          taskItem.appendChild(deleteBtn);
          taskList.appendChild(taskItem);
        });

        projectEl.appendChild(taskList);
        projectsContainer.appendChild(projectEl);
      });
    }

    projectForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = projectNameInput.value.trim();
      if (name) {
        projects.push({
          name: name,
          tasks: [],
          createdAt: new Date().toLocaleString()
        });
        projectNameInput.value = "";
        saveProjects();
        renderProjects();
      }
    });

    renderProjects();

  titleContainer.appendChild(title);
  titleContainer.appendChild(deleteProjectBtn);
  projectEl.appendChild(titleContainer);

  </script> -->


  <script>
  const projectForm = document.getElementById("projectForm");
  const projectNameInput = document.getElementById("projectName");
  const projectsContainer = document.getElementById("projectsContainer");

  let projects = JSON.parse(localStorage.getItem("projects")) || [];

  function saveProjects() {
    localStorage.setItem("projects", JSON.stringify(projects));
  }

  function isExpired(deadline) {
    return new Date(deadline) < new Date();
  }

  function cleanUpExpired() {
    // Remove expired tasks
    projects.forEach(project => {
      project.tasks = project.tasks.filter(task => !isExpired(task.deadline));
    });

    // Remove expired projects
    projects = projects.filter(project => !isExpired(project.deadline));
    saveProjects();
  }

  function renderProjects() {
    cleanUpExpired(); // remove old data before render
    projectsContainer.innerHTML = "";

    projects.forEach((project, index) => {
      const projectEl = document.createElement("div");
      projectEl.className = "project";

      const title = document.createElement("h2");
      title.style.display = "flex";
      title.style.justifyContent = "space-between";
      title.style.alignItems = "center";

      const titleText = document.createElement("span");
      titleText.textContent = project.name;

      const dateText = document.createElement("div");
      dateText.style.fontSize = "0.9rem";
      dateText.style.color = "#333";
      dateText.innerHTML = `Created: ${project.createdAt || "Unknown"}<br>Deadline: ${new Date(project.deadline).toLocaleString()}`;

      const deleteProjectBtn = document.createElement("button");
      deleteProjectBtn.textContent = "X";
      deleteProjectBtn.className = "delete-btn";
      deleteProjectBtn.style.marginLeft = "1rem";
      deleteProjectBtn.onclick = () => {
        projects.splice(index, 1);
        saveProjects();
        renderProjects();
      };

      title.appendChild(titleText);
      title.appendChild(deleteProjectBtn);
      projectEl.appendChild(title);
      projectEl.appendChild(dateText);

      const taskInput = document.createElement("input");
      taskInput.placeholder = "New Task";
      taskInput.className = "add-task-input";

      const addTaskBtn = document.createElement("button");
      addTaskBtn.textContent = "Add Task";
      addTaskBtn.className = "add-task-btn";
      addTaskBtn.onclick = () => {
        if (taskInput.value.trim() !== "") {
          const now = new Date();
          const deadline = new Date(now.getTime() + 1 * 60 * 60 * 1000); // 1 hour
          project.tasks.push({
            text: taskInput.value.trim(),
            completed: false,
            createdAt: now.toLocaleString(),
            deadline: deadline.toISOString()
          });
          saveProjects();
          renderProjects();
        }
      };

      projectEl.appendChild(taskInput);
      projectEl.appendChild(addTaskBtn);

      const taskList = document.createElement("ul");
      taskList.className = "task-list";

      project.tasks.forEach((task, tIndex) => {
        const taskItem = document.createElement("li");
        taskItem.className = "task";
        if (task.completed) taskItem.classList.add("completed");

        const taskContent = document.createElement("div");
        taskContent.style.display = "flex";
        taskContent.style.flexDirection = "column";

        const taskSpan = document.createElement("span");
        taskSpan.textContent = task.text;
        taskSpan.style.cursor = "pointer";
        taskSpan.onclick = () => {
          task.completed = !task.completed;
          saveProjects();
          renderProjects();
        };

        const taskDate = document.createElement("small");
        taskDate.style.fontSize = "0.8rem";
        taskDate.style.color = "#444";
        taskDate.textContent = `Created: ${task.createdAt || "Unknown"}`;

        const taskDeadline = document.createElement("small");
        taskDeadline.style.fontSize = "0.8rem";
        taskDeadline.style.color = "#b00";
        taskDeadline.textContent = `Deadline: ${new Date(task.deadline).toLocaleString()}`;

        taskContent.appendChild(taskSpan);
        taskContent.appendChild(taskDate);
        taskContent.appendChild(taskDeadline);

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "X";
        deleteBtn.className = "delete-btn";
        deleteBtn.onclick = () => {
          project.tasks.splice(tIndex, 1);
          saveProjects();
          renderProjects();
        };

        taskItem.appendChild(taskContent);
        taskItem.appendChild(deleteBtn);
        taskList.appendChild(taskItem);
      });

      projectEl.appendChild(taskList);
      projectsContainer.appendChild(projectEl);
    });
  }

  projectForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const name = projectNameInput.value.trim();
    if (name) {
      const now = new Date();
      const deadline = new Date(now.getTime() + 10 * 24 * 60 * 60 * 1000); // 10 days
      projects.push({
        name: name,
        tasks: [],
        createdAt: now.toLocaleString(),
        deadline: deadline.toISOString()
      });
      projectNameInput.value = "";
      saveProjects();
      renderProjects();
    }
  });

  renderProjects();
</script>

</body>
</html>
